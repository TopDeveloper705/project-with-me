<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>
      <img loading="lazy" src="assets/images/logo-light.svg" />
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="dot"></div>
  <video
    #videoElm
    muted
    preload="auto"
    playsinline
    onloadedmetadata="this.muted = true"
    [@visibilityChanged]="visiblityState"
  >
    <source
      src="/assets/videos/rauch-1.webm"
      type="video/webm"
      *ngIf="!platform.SAFARI"
    />
    <source src="/assets/videos/rauch-1.mp4" type="video/mp4" />
  </video>

  <!--<swiper [slidesPerView]="4" [spaceBetween]="30" [centeredSlides]="true">
    <ng-template swiperSlide *ngFor="let slide of manufacturers">
      <swiper
        [direction]="'vertical'"
        [slidesPerView]="4"
        [spaceBetween]="30"
        [centeredSlides]="true"
      >
        <ng-template swiperSlide>
          <div class="slide-item" (click)="selectSession(slide, 'manufactur')">
            <div
              class="inside-dot"
              [style.backgroundImage]="'url(' + helper.getImageUrl(slide.image?.url) + ')'"
            ></div>
            <div class="item-title">{{slide.name}}</div>
          </div>
        </ng-template>
        <ng-template swiperSlide *ngFor="let children of slide.smoke_products">
          <div
            class="slide-item inner-slide"
            (click)="selectSession(children, 'product')"
          >
            <div
              class="inside-dot"
              [style.backgroundImage]="'url(' + helper.getImageUrl(children.image?.url) + ')'"
            ></div>
            <div class="item-title">{{children.name}}</div>
          </div>
        </ng-template></swiper
      >
    </ng-template>
  </swiper>-->

  <ion-slides
    *ngIf="loadIcons && manufacturers"
    #mainSlider
    class="first"
    [options]="slideOpts"
  >
    <ion-slide *ngFor="let slide of manufacturers">
      <ion-slides [options]="slideOptsVert">
        <ion-slide>
          <div class="slide-item" (click)="selectSession(slide, 'manufactur')">
            <div
              class="inside-dot"
              [style.backgroundImage]="'url(' + helper.getImageUrl(slide.image?.formats?.medium?.url || slide.image?.url) + ')'"
            ></div>
            <div class="item-title">{{slide.name}}</div>
          </div>
        </ion-slide>
        <ion-slide *ngFor="let children of slide.smoke_products">
          <div
            class="slide-item inner-slide"
            (click)="selectSession(children, 'product')"
          >
            <div
              class="inside-dot"
              [style.backgroundImage]="'url(' + helper.getImageUrl(children.image?.formats?.medium?.url ||children.image?.url) + ')'"
            ></div>
            <div class="item-title">{{children.name}}</div>
          </div>
        </ion-slide>
      </ion-slides>
    </ion-slide>
  </ion-slides>

  <div class="map" (click)="openMapModal()">
    <div class="overlay"></div>
    <google-map #map [center]="center" [zoom]="zoom" [options]="options">
      <map-marker
        *ngFor="let markerPosition of markerPositions"
        [position]="markerPosition"
      ></map-marker>
    </google-map>
    <!--<agm-map
      [latitude]="lat"
      [longitude]="lng"
      [zoom]="zoom"
      [disableDefaultUI]="true"
      [styles]="mapService.getStyles()"
    >
      <agm-marker
        *ngFor="let marker of markers"
        [latitude]="marker.lat"
        [longitude]="marker.lng"
      ></agm-marker>
    </agm-map>-->
  </div>

  <ion-fab
    vertical="bottom"
    horizontal="start"
    slot="fixed"
    [routerLink]="['/advertising']"
  >
    <ion-fab-button>
      <ion-icon name="cart-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

  <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <!--<ion-fab-button (click)="sharePosition()">
      <ion-icon name="share-outline"></ion-icon>
    </ion-fab-button>-->
    <ion-fab-button (click)="openMapModal()">
      <ion-icon name="map-outline"></ion-icon>
    </ion-fab-button>

    <!--<ion-fab-list side="top">
      <ion-fab-button (click)="sharePosition()" data-desc="Position teilen"
        ><ion-icon name="share-outline"></ion-icon
      ></ion-fab-button>

      <ion-fab-button
        data-desc="Position bestimmen"
        (click)="getCurrentPosition()"
        [disabled]="locationLoading"
      >
        <ion-icon *ngIf="!locationLoading" name="location-outline"></ion-icon>
        <ion-spinner *ngIf="locationLoading"></ion-spinner>
      </ion-fab-button>
    </ion-fab-list>-->
  </ion-fab>

  <!--<ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button>
      <ion-icon name="camera-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>-->
</ion-content>
<!--
<div class="cupertino-pane-home">
  <app-map *ngIf="cupertino"></app-map>
</div>-->
